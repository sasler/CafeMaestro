<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CafeMaestro.MainPage"
             Title="CafeMaestro">    <ScrollView BackgroundColor="{AppThemeBinding Light=White, Dark=#1c1c1c}">
        <VerticalStackLayout Padding="30,20" Spacing="15" BackgroundColor="{AppThemeBinding Light=White, Dark=#1c1c1c}">
            <Image Source="dotnet_bot.png" HeightRequest="100" Aspect="AspectFit" />

            <Label Text="CafeMaestro" FontSize="32" HorizontalOptions="Center" TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />
            <Label Text="Coffee Roasting Tracker" FontSize="24" HorizontalOptions="Center" TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />            <Grid ColumnDefinitions="*,Auto">
                <Label Text="Green Bean Selection:" Grid.Column="0" VerticalOptions="Center" TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                <Button Text="+" 
                       Grid.Column="1" 
                       WidthRequest="40"
                       HeightRequest="40"
                       CornerRadius="20"
                       FontSize="20"
                       BackgroundColor="{AppThemeBinding Light=#512BD4, Dark=#7555DB}"
                       TextColor="{AppThemeBinding Light=White, Dark=White}"
                       Clicked="ManageBeans_Clicked"
                       ToolTipProperties.Text="Manage Bean Inventory"/>
            </Grid>
              <Picker x:Name="BeanPicker" 
                    Title="Select Bean Type"
                    TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                    BackgroundColor="{AppThemeBinding Light=White, Dark=#2d2d2d}">
                <Picker.Items>
                    <x:String>Loading beans...</x:String>
                </Picker.Items>
            </Picker>

            <Label Text="Roasting Temperature (°C):" TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />
            <Entry x:Name="TemperatureEntry" 
                   Keyboard="Numeric" 
                   Placeholder="Enter temperature"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#2d2d2d}"
                   PlaceholderColor="{AppThemeBinding Light=#7F7F7F, Dark=#9F9F9F}" />            <Label Text="Roasting Time:" TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />
            <!-- Timer UI with digital watch styling -->
            <VerticalStackLayout Spacing="10">                <!-- The digital timer display should keep its unique styling regardless of theme -->
                <Frame BorderColor="{AppThemeBinding Light=LightGray, Dark=#444444}" 
                       BackgroundColor="Black" 
                       Padding="10" 
                       CornerRadius="5" 
                       HorizontalOptions="Center">
                    <Grid>
                        <!-- Digital display label for the timer -->
                        <Label x:Name="TimeDisplayLabel"
                               Text="00:00"
                               FontSize="48"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"
                               VerticalTextAlignment="Center"
                               TextColor="#32FF6A"
                               FontFamily="Digital7"
                               BackgroundColor="Black" />
                    
                        <!-- Invisible entry for user input - same size as the label but transparent -->
                        <Entry x:Name="TimeEntry"
                               Text=""
                               FontSize="1"
                               Opacity="0"
                               Keyboard="Numeric"
                               MaxLength="5"
                               Focused="TimeEntry_Focused"
                               Unfocused="TimeEntry_Unfocused"
                               TextChanged="TimeEntry_TextChanged" />
                    </Grid>
                </Frame>
                <HorizontalStackLayout HorizontalOptions="Center" Spacing="10">
                    <ImageButton x:Name="StartTimerButton" Source="timer_play_icon.png" Clicked="StartTimer_Clicked" 
                                 BackgroundColor="Transparent" WidthRequest="60" HeightRequest="60">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1.1" />
                                        <Setter Property="Opacity" Value="0.8" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.9" />
                                        <Setter Property="BackgroundColor" Value="#333333" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </ImageButton>
                    <ImageButton x:Name="PauseTimerButton" Source="timer_pause_icon.png" Clicked="PauseTimer_Clicked" 
                                 BackgroundColor="Transparent" WidthRequest="60" HeightRequest="60" IsEnabled="False">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1.1" />
                                        <Setter Property="Opacity" Value="0.8" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.9" />
                                        <Setter Property="BackgroundColor" Value="#333333" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Property="Opacity" Value="0.5" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </ImageButton>
                    <ImageButton x:Name="StopTimerButton" Source="timer_stop_icon.png" Clicked="StopTimer_Clicked" 
                                 BackgroundColor="Transparent" WidthRequest="60" HeightRequest="60" IsEnabled="False">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1.1" />
                                        <Setter Property="Opacity" Value="0.8" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.9" />
                                        <Setter Property="BackgroundColor" Value="#333333" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Property="Opacity" Value="0.5" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </ImageButton>
                    <ImageButton x:Name="ResetTimerButton" Source="timer_reset_icon.png" Clicked="ResetTimer_Clicked" 
                                 BackgroundColor="Transparent" WidthRequest="60" HeightRequest="60">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1.1" />
                                        <Setter Property="Opacity" Value="0.8" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.9" />
                                        <Setter Property="BackgroundColor" Value="#333333" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </ImageButton>
                </HorizontalStackLayout>                <Label x:Name="TimerInstructionLabel" 
                       Text="Tap timer to enter time: 1=1s, 12=12s, 123=1m:23s, 1234=12m:34s" 
                       FontSize="12" 
                       TextColor="{AppThemeBinding Light=Gray, Dark=#BBBBBB}" 
                       HorizontalOptions="Center" />
            </VerticalStackLayout>

            <Label Text="Batch Weight (g):" />
            <Entry x:Name="BatchWeightEntry" Keyboard="Numeric" Placeholder="Enter batch weight" />

            <Label Text="Final Weight (g):" TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />
            <Entry x:Name="FinalWeightEntry" 
                  Keyboard="Numeric" 
                  Placeholder="Enter final weight"
                  TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                  BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#333333}" />

            <Label x:Name="LossPercentLabel" 
                  Text="Weight Loss: --" 
                  FontSize="18" 
                  TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />
            <Label x:Name="RoastSummaryLabel" 
                  Text="Roast Summary: --" 
                  FontSize="18" 
                  TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />

            <!-- New Notes field -->
            <Label Text="Notes:" TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />
            <Editor x:Name="NotesEditor" 
                   Placeholder="Add notes about this roast..."
                   HeightRequest="100"
                   AutoSize="TextChanges"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                   BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#333333}" />

            <!-- Save Button -->
            <Button x:Name="SaveRoastButton"
                   Text="Save Roast Log"
                   Clicked="SaveRoast_Clicked"
                   BackgroundColor="#512BD4"
                   TextColor="White"
                   HorizontalOptions="Fill"
                   Margin="0,20,0,10" />

            <!-- View Saved Logs Button -->
            <Button x:Name="ViewLogsButton"
                   Text="View Saved Logs"
                   Clicked="ViewLogs_Clicked"
                   BackgroundColor="#0078D4"
                   TextColor="White"
                   HorizontalOptions="Fill" />
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
